# FEATURES：教学用 Simple Coder Agent 功能与示例（含最小 UI 与会话期上下文）

范围
- 教学用途；单回合、单工具调用；会话期保留上下文（应用未关闭时）；仅仓库根内操作；最小 UI。

功能清单（V0）
- read_file：读取文件文本。
- list_dir / glob：列出目录或按模式匹配文件。
- search（regex/contains）：检索文件内容。
- replace（exact，唯一匹配）：精确字符串替换。
- 会话期上下文：在应用未关闭期间保留近期消息与结果摘要，便于连续小任务。
- 最小 UI：单页、输入框 + 工具下拉 + 执行按钮 + 结果区 + 轻量状态提示。

功能描述
- read_file
  - 输入：相对路径（可选：行数/区间）。
  - 输出：文本；过长时截断并提示。
  - 失败：文件不存在/路径越界 → 错误文案。
- list_dir / glob
  - 输入：目录或通配模式。
  - 输出：相对路径列表（上限提示）。
  - 失败：目录不存在/路径越界 → 错误文案。
- search（regex/contains）
  - 输入：模式 + 路径范围（目录/文件）。
  - 输出：文件:行号:片段 的精简列表（上限与截断提示）。
  - 失败：未匹配/正则无效 → 错误文案或建议语。
- replace（exact）
  - 输入：文件路径 + old_string + new_string。
  - 约束：要求 old_string 唯一匹配；否则拒绝。
  - 输出：成功摘要（替换 1 处；可附最小前后文对比）。
  - 失败：未命中/不唯一/越界 → 明确原因，不执行。
- 会话期上下文
  - 范围：保留近期消息与结果摘要（如最近 N 条）。
  - 行为：用于理解连续的轻任务（例如“刚才命中的第 2 个文件，读取前 20 行”）。
  - 生命周期：应用关闭/刷新即清空；不做跨会话持久化。
- 最小 UI
  - 结构：
    - 输入区：多行文本框（占位提示示例）。
    - 工具选择：下拉（Auto/read/list/search/replace），默认 Auto。
    - 执行按钮：Submit；状态：Loading。
    - 结果区：等宽字体、可复制；错误/提示横幅。
  - 行为：显示本次结果；侧边/顶部可简要列出会话期“最近结果摘要”。

示例用法（请求 → 结果形态）
- 连续任务（依赖上下文）
  1) 搜索：在 docs/ 中搜索 "Agent"（i）。
     - 结果：若干条 文件:行号:片段（记录摘要）。
  2) 读取：打开刚才结果中的第 1 条文件的前 20 行。
     - 结果：该文件前 20 行文本。
- read_file：读取 docs/README.md 的前 15 行 → 文本（≤15 行）。
- list_dir / glob：列出 docs/sources 下的 .md 文件 → 路径列表。
- search（contains，i）：在 docs/ 中搜 "Agent" → 命中摘要（可能截断）。
- replace（exact）：将 docs/README.md 中 "Open Questions" → "Unresolved Questions"（唯一）→ 成功摘要或错误原因。

注意
- 上下文仅在会话期内；应用关闭/刷新即清空。
- UI 仍为教学演示：无账户、无持久化、无高级交互。
- 所有操作受路径与唯一性约束；错误优先清晰与可学习性。
